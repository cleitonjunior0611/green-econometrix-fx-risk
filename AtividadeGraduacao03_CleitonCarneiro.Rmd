---
title: "Environmental Degradation & Exchange Rate Volatility"
author: 'Cleiton José Carneiro Junior'
output:
  pdf_document:
    citation_package: natbib
    includes:
      after_body: disclaimer.tex
bibliography: referencias.bib
csl: abnt.csl 
nocite: |
  @gori2017econometria, @wooldridge2001introductory, @hanck2018introduction, @deepseek2024
---

# Análise Descritiva

a)  **Carregue a base de dados e calcule estatísticas descritivas para as variáveis: exchange_rate_change, loss_of_nature e interest_rate.**

```{r, message=FALSE, warning=FALSE}

# carregando pacotes
library(tidyverse)

# carregando a base de dados
data <- read_csv("simulated_exchange_rate_data.csv", show_col_types = FALSE)

# estatisticas descritivas das variaveis
desc_stats <- data %>%
  select(exchange_rate_change, loss_of_nature, interest_rate) %>%
  summary()

desc_stats
```

```{r, message=FALSE, warning=FALSE, fig.width=10, fig.height=6}
# Plotando histogramas das variaveis
par(mfrow = c(1, 3))

hist(data$exchange_rate_change, 
     main = "Variação Cambial", 
     xlab = "Variação (%)", 
     ylab = "Frequência",
     col = "lightblue",
     border = "black")
hist(data$loss_of_nature,
     main = "Degradação Ambiental", 
     xlab = "Índice (0-1)", 
     ylab = "Frequência",
     col = "lightgreen",
     border = "black")
hist(data$interest_rate,
     main = "Taxa de Juros", 
     xlab = "Taxa (%)", 
     ylab = "Frequência",
     col = "lightpink",
     border = "black")
```

Para $exchange\_rate\_change$ é possível notar uma distribuição assimétrica à esquerda, com a média (-0.13001) menor do que a mediana (-0.08634). Com uma relevante amplitude de -0.86241 a 0.27396, indicando uma volatilidade cambial. Por fim, comparando o terceiro quartil (0.09264) com a mediana (-0.08634), nota-se uma possível predominância de desvalorizações cambiais.

Para $loss\_of\_nature$ observa-se uma distribuição equilibrada, com uma média (0.5731) próxima da mediana (0.5830). A amplitude de 0.2541 a 0.8320, dentro do esperado pela escala de 0 a 1 descrita. Por fim, nota-se que 50% dos dados encontram-se entre 0.5189 e 0.6513, indicando uma moderada variabilidade.

Por fim, para $interest\_rate$ indica-se uma possível distribuição assimétrica à esquerda, com uma média (4.698) abaixo da mediana (4.848). A amplitude de 2.000 a 8.407, dentro do esperado pela escala de 2% a 10% descrita. Por fim, 25% dos países têm taxas abaixo de 3.328%, enquanto 25% acima de 6.098%.

b)  **Faça um gráfico de linha com a variável loss_of_nature ao longo do tempo para cada país.**

```{r, message=FALSE, warning=FALSE, fig.width=10, fig.height=6}

# carregando pacotes
library(ggplot2)
library(ggthemes) 
library(scales)

# Organizando a ordem dos paises (visualmente mais atrativo)
ordem_paises <- c(paste0("C", 1:9), "C10")
data$country <- factor(data$country, levels = ordem_paises)


# plotando o grafico de linha com a variavel loss_of_nature ao longo do tempo para cada pais
ggplot(data, aes(x = year, y = loss_of_nature, color = country)) +
  geom_line(linewidth = 0.5) +
  scale_x_continuous(breaks = seq(2000, 2019, by = 1),
                     labels = seq(2000, 2019, by = 1)) +
  labs(title = "Degradação Ambiental por País (2000-2019)",
       x = "Ano",
       y = "Índice de Degradação Ambiental") +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 14, face = "bold", hjust = 0.5),
    axis.title.y = element_text(size = 11, margin = margin(r = 10)),
    axis.text.x = element_text(angle = 45, hjust = 1, size = 10),
    axis.text.y = element_text(size = 10),
    legend.title = element_text(face = "bold"),
    legend.position = "right",
    legend.key.height = unit(0.8, "lines"),
    plot.margin = unit(c(1,1,1,1), "cm")
  ) +

  scale_color_discrete(name = "País")
```

A análise gráfica reitera as interpretações realizadas das estatísticas descritivas. Dos dez países presentes na amostra, seis apresentam valores dentro do intervalo entre o primeiro e o terceiro quartil, isto é, encontram-se entre 0.5189 e 0.6513, indicando uma moderada variabilidade. Os demais representam as caudas do gráfico, tanto à esquerda quanto à direta.

# Estimação via Regressão Linear

**Estime uma regressão linear (OLS) da variável** $exchange\_rate\_change$ **sobre:** $loss\_of\_nature$ **e** $interest\_rate$**. Considerando o modelo abaixo:**

$$
\text{exchange\_rate\_change}_{it} = \alpha + \beta_1 \cdot \text{loss\_of\_nature}_{it} + \beta_2 \cdot \text{interest\_rate}_{it} + \epsilon_{it}
$$

```{r, message=FALSE, warning=FALSE}

# Estimação do modelo OLS
model_ols <- lm(exchange_rate_change ~ loss_of_nature + interest_rate, data = data)

# Resumo dos resultados
summary(model_ols)
```

**Os coeficientes são estatisticamente significantes?**

Sim. A partir do método OLS, obteve-se os estimadores $\hat\beta_1$ e $\hat\beta_2$ para as variáveis $loss\_of\_nature$ e $interest\_rate$. Os coeficientes são estatisticamente significativos assumindo um $valor-p<0.001$, respectivamente, $p-value < 2e-16$ e $p-value<0.000291$. A avaliação do valor-p dos coeficientes preditores do modelo é importante para determinar a significância estatística desses coeficientes. Nesse modelo, a avaliação dos valores-p rejeita a hipótese nula de que os coeficientes são nulos. Além disso, avaliando a estatística F com $p-value < 2.2e-16$, verifica-se que o modelo possui pelo menos um dos coeficientes preditores com relevância estatística.

**Quais as limitações de usar OLS para analisar riscos extremos de desvalorização cambial?**

A abordagem econômica do método OLS para o modelo de regressão múltipla interpreta que os estimadores obtidos indicam o quanto espera-se que a variável dependente ($\hat y$) muda em média para cada unidade de mudança na variável $x_1$, mantendo a $x_2$ constante, e vice-versa. Por exemplo, como $\hat\beta_1 = -1.19480$, é possível afirmar que, em média, para cada aumento unitário na variável $loss\_of\_nature$, mantendo a variável $interest\_rate$ constante, espera-se uma diminuição **média** de aproximadamente $-1.19480$ na variável $exchange\_rate\_change$. Ou seja, a degradação ambiental ($loss\_of\_nature$) tem um efeito negativo sobre a taxa de câmbio. Enquanto as taxas de juros estão associadas a um efeito de leve valorização cambial ($\hat\beta_2=0.03783$). Vale ressaltar que essa interpretação assume que o modelo estaria corretamente especificado e que não há variáveis omitidas ou endogeneidade.

Desse modo, o método OLS estima as variações médias esperadas na variável dependente, por isso, a sua adoção para avaliação de cenários extremos da variável dependente é extremamente limitada — além dos outliers poderem distorcer a média. Afinal, nesse caso, os riscos associados à desvalorização cambial estão localizados na cauda esquerda da distribruição dos dados. Em cenários extremos, o método OLS subestimaria o impacto da variável independente na variável dependente, pois assume-se que o efeito médio é constante. Por isso, a adoção da regressão quantílica pode ser uma alternativa viável para estudo de eventos extremos.

# Regressões Quantílicas

**Estime regressões quantílicas para os quantis de volatilidade cambial:** $\tau$ **= 0.1, 0.25, 0.5, 0.75 e 0.9, utilizando como variáveis explicativas** $loss\_of\_nature$ **e** $interest\_rate$**. Crie uma tabela com os coeficientes, erros-padrão e p-valores para cada quantil. Plote um gráfico com os coeficientes estimados de loss_of_nature e interest_rate ao longo dos quantis.**

```{r, message=FALSE, warning=FALSE}

# Carregando pacotes
library(quantreg)

# Variável com valores dos quantis 
quantiles <- c(0.1, 0.25, 0.5, 0.75, 0.9)

# Data frame vazio para depositar os resultados
resultados <- data.frame()

# Loop para sistematizar os modelos para cada valores

for (q in quantiles) {

    modelo <- rq(exchange_rate_change ~ loss_of_nature + interest_rate, 
               tau = q, 
               data = data)
  
  sumario <- summary(modelo, se = "boot")
  
  # data frame com os coeficientes, erros-padrao e p-valores para cada quantil
  df <- data.frame(
    Quantil = q,
    Variavel = names(coef(modelo)),
    Coeficiente = coef(modelo),
    Erro_Padrao = sumario$coefficients[, "Std. Error"],
    P_valor = sumario$coefficients[, "Pr(>|t|)"],
    row.names = NULL
  )
  
  # adicionando os valores ao data frame principal
  resultados <- rbind(resultados, df)
}

```

```{=tex}
\begin{table}[h]
\centering
\caption{Resultados das regressões quantílicas para a variação da taxa de câmbio}
\label{tab:resultados}
\begin{tabular}{lccccc}
\hline
Quantil & Variável & Coeficiente & Erro Padrão & p-valor & Significância \\ 
\hline
0.10 & Intercepto & 0.2536 & 0.0816 & 0.0022 & ** \\ 
0.10 & Perda de natureza & -1.4205 & 0.1262 & <0.0001 & *** \\ 
0.10 & Taxa de juros & 0.0467 & 0.0155 & 0.0030 & ** \\ 
\hline
0.25 & Intercepto & 0.3983 & 0.0336 & <0.0001 & *** \\ 
0.25 & Perda de natureza & -1.4536 & 0.0812 & <0.0001 & *** \\ 
0.25 & Taxa de juros & 0.0355 & 0.0110 & 0.0014 & ** \\ 
\hline
0.50 & Intercepto & 0.4008 & 0.0510 & <0.0001 & *** \\ 
0.50 & Perda de natureza & -1.3676 & 0.1377 & <0.0001 & *** \\ 
0.50 & Taxa de juros & 0.0421 & 0.0172 & 0.0151 & * \\ 
\hline
0.75 & Intercepto & 0.2091 & 0.1185 & 0.0793 &  \\ 
0.75 & Perda de natureza & -0.5710 & 0.2381 & 0.0174 & * \\ 
0.75 & Taxa de juros & 0.0350 & 0.0196 & 0.0760 &  \\ 
\hline
0.90 & Intercepto & 0.0905 & 0.0382 & 0.0188 & * \\ 
0.90 & Perda de natureza & -0.3031 & 0.0649 & <0.0001 & *** \\ 
0.90 & Taxa de juros & 0.0484 & 0.0060 & <0.0001 & *** \\ 
\hline
\end{tabular}
\footnotesize
\\ Fonte: Elaborado pelo autor (2025). \\ Nota: * p < 0.05, ** p < 0.01, *** p < 0.001.
\end{table}
```
```{r, message=FALSE, warning=FALSE, fig.width=10, fig.height=6}

# Carregando pacotes necessários
library(ggplot2)
library(tidyr) 
library(dplyr)

resultados_plot <- resultados %>% filter(Variavel %in% c('loss_of_nature', 'interest_rate'))

# Criando o gráfico
ggplot(resultados_plot, aes(x = Quantil, y = Coeficiente, color = Variavel)) +
  geom_line(linewidth = 0.8, alpha = 0.8) +
  geom_point(size = 2.5, alpha = 0.9) +
  labs(
    title = "Coeficientes Estimado por Quantil",
    x = "Quantil",
    y = "Valor do Coeficiente",
    color = "Variável"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 14, face = "bold", hjust = 0.5),
    axis.title = element_text(size = 11),
    axis.title.y = element_text(margin = margin(r = 10)),
    axis.text.x = element_text(size = 10),
    axis.text.y = element_text(size = 10),
    legend.title = element_text(face = "bold"),
    legend.position = "right",
    legend.key.height = unit(0.8, "lines"),
    panel.grid.minor = element_blank(),
    plot.margin = unit(c(1,1,1,1), "cm")
  ) +
  scale_x_continuous(
    breaks = quantiles,
    labels = quantiles,
    expand = expansion(mult = 0.02)
  ) +
  scale_y_continuous(
    labels = number_format(accuracy = 0.01),
    expand = expansion(mult = 0.05)
  ) +
  scale_color_manual(
    name = "Variável",
    values = c("loss_of_nature" = "#1f77b4",  # Azul
               "interest_rate" = "#ff7f0e"), # Laranja
    labels = c("loss_of_nature" = "Degradação Ambiental",
               "interest_rate" = "Taxa de Juros")
  ) +
  guides(color = guide_legend(ncol = 1))

```

**Como varia o efeito da variável loss_of_nature ao longo dos quantis? Em quais quantis o efeito é mais forte? Onde ele enfraquece?**

Como observado no gráfico acima, a variável $loss\_of\_nature$ apresenta o comportamento mais destoante. A variável apresenta valores negativos em todos os quantis, indicando uma relação inversa entre o aumento na degradação ambiental e a desvalorização cambial. Entretanto, a magnitude do efeito varia dentre os quantis.

Para os quantis 0.1 e 0.25, os coeficientes assumiram valores mais negativos, respectivamente, -1.4205 e -1.4536. Indicando que impacto da degradação ambiental é maior em cenários de desvalorização cambial extrema. Já o quantil 0.5 apresentou coeficiente com valor negativo de -1.3676, ligeiramente menos negativo, porém, como um impacto ainda significativo. Por fim, os quantis 0.75 e 0.9, apresentaram coeficientes com valores de -0.5710 e -0.3031, respectivamente. Indicando que o impacto da degradação ambiental enfraquece em cenários de menor volatilidade cambial. Para melhor compreensão dos valores presentes nos quantis de exchange_rate_change, *vide* o histograma presente no item 'a' do exercício um desse documento.

**O que isso indica sobre a relação entre degradação ambiental e risco de desvalorização cambial? Os resultados estão em linha com o que você esperaria? Quais canais você acha mais relevante para explicar essa relação?**

Em suma, de acordo com o modelo de regressão quantílica ajustado, é possível inferir que a degradação ambiental tem um maior impacto em situações de crise cambial (desvalorizações extremas). Entretanto, há um enfraquecimento do seu impacto em cenários de menor volatilidade, apresentando um efeito moderado.

Os resultados permitem traçar possíveis cenários para compreender por quais canais são transmitidos seus impactos da degradação ambiental sobre o câmbio. Como, por exemplo, a balança de pagamentos, fluxos de capital, taxas de juros, inflação, expectativas, dentre outros.

Por isso, esse trabalha analisa que a degradação ambiental resulta na perda de recursos naturais e ambientais, reduzindo a capacidade produtiva, aumentando custos, diminuindo a competividade das suas exportações, impactando negativamente na sua balança de pagamentos. A piora nos termos de troca e a inflação podem pressionar o câmbio. Além disso, degradações ambientais podem afetar as expectativas dos investidores, onde a instabilidade e a incerteza podem desestimular investimentos, pressionando a moeda. Se assim for, os resultados estão de acordo com as minhas expectativas, a degradação ambiental pode gerar instabilidades produtivas, comerciais e expectacionais, afetando a estabilidade macroeconômica.

# Referências
